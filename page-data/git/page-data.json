{"componentChunkName":"component---src-templates-blog-post-js","path":"/git/","result":{"data":{"site":{"siteMetadata":{"title":"Tectac","author":"David Briggs"}},"markdownRemark":{"id":"0e002ed6-dbd4-5205-87c5-3eefae9dfcd6","excerpt":"Git Crib Notes General things to know Workflow of git: Workingspace: holds the actual files this is what you see and edit. Index: Acts as a staging area. That…","html":"<p>Git Crib Notes</p>\n<h2>General things to know</h2>\n<p>Workflow of git:</p>\n<ul>\n<li>Workingspace: holds the actual files this is what you see and edit.</li>\n<li>Index: Acts as a staging area. That is, snapshot for next commit. Will be done by git add command.</li>\n<li>HEAD : Points to the last commit (and current branch) you've made.</li>\n</ul>\n<p>Git has three stages:</p>\n<ul>\n<li>Committed : means data is safely stored in your local git repository.</li>\n<li>Modified : means you've changed the file but not committed.</li>\n<li>Staged : means you've marked a modified file in its current version to go into your next commit snapshot.</li>\n</ul>\n<h2>git Command work flow</h2>\n<ol>\n<li>git init or git clone\na. git status; git log; git blame; git show; git diff\nb. git pull (fetch &#x26; merge), git fetch &#x3C;remote>, git merge\nc. git checkout &#x3C;branch></li>\n<li>git add</li>\n<li>git commit -m \"\"</li>\n<li>git push</li>\n</ol>\n<h2>Initialize new git repository on gitlab</h2>\n<p>Notes on setting a gitlab repository from your local  machine.</p>\n<h3>Create</h3>\n<p><code class=\"language-text\">git init</code></p>\n<h3>Add  directories into exclude in gitignore</h3>\n<p>In this case /public directory to our .gitignore file when using hugo</p>\n<p><code class=\"language-text\">echo &quot;/public&quot; &gt;&gt; .gitignore</code></p>\n<h3>commit and push code to main branch</h3>\n<p><code class=\"language-text\">git add .\ngit commit -m &quot;Initial commit&quot;\ngit remote add origin https://gitlab.com/YourUsername/your-web-site.git\ngit push -u origin main</code></p>\n<h2>rename master to main</h2>\n<p>git checkout master # switch to master if needed\ngit branch -m master main\ngit status\nif using github via web browser resolve any setting for default branch and protected status\nthen\ngit push -u origin main\ngit push origin --delete master</p>\n<p>if you have a local master and the remote is already main</p>\n<div class=\"gatsby-highlight\" data-language=\"cli\"><pre class=\"language-cli\"><code class=\"language-cli\"># Switch to the &quot;master&quot; branch:\n$ git checkout master\n\n# Rename it to &quot;main&quot;:\n$ git branch -m master main\n\n# Get the latest commits (and branches!) from the remote:\n$ git fetch\n\n# Remove the existing tracking connection with &quot;origin/master&quot;:\n$ git branch --unset-upstream\n\n# Create a new tracking connection with the new &quot;origin/main&quot; branch:\n$ git branch -u origin/main</code></pre></div>\n<p>Check any CI tools for issues\nCheck documentation  for main</p>\n<h2>working with remote repositories</h2>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\">git remote -v  # show URL of remote repository\n\ngit remote add &lt;shortname> &lt;url> # Creates a new connection or alias to a remote repository.\ngit remote  remove &lt;shortname> # removes alias</code></pre></div>\n<p><em>example</em>\n<code class=\"language-text\">git remote add production https://xxxx@github.com/xxxx/example.git</code></p>\n<h2>Compare local and (or) remote</h2>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\">git status\ngit status -v\ngit status -v -v</code></pre></div>\n<p>git status tells you what you staged but not committed and what you have modified in the workspace but not staged. Basically staged is a checkpoint</p>\n<p>To see the difference between staged and unstaged use:\n<code class=\"language-text\">git diff</code></p>\n<p>To see whats change  in workspace since the last commit\ngit diff HEAD</p>\n<p>To see the difference between HEAD the repository and staged\ngit diff --staged</p>\n<p>Does this mean you can have and see multiple check points?</p>\n<h3>Other ways of comparing files</h3>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\">git log &lt;main> &lt;feature-branch>  # compare local and feature\ngit log &lt;origin/main> &lt;main>     # compare remote and local</code></pre></div>\n<p>NOT SURE THIS RIGHT\nFirst list all branches.</p>\n<p>git branch -a</p>\n<p>git diff &#x3C;local branch> &#x3C;remote>/&#x3C;remote branch>\ngit diff --stat --color remotes/main/master..origin/master\ngit diff remotes/main/master..origin/master</p>\n<p>For example</p>\n<p> git diff main origin/main</p>\n<h2>comparing the upstream branch</h2>\n<p> git diff @{upstream}\nIf you want to compare your current HEAD with the upstream branch (thanks @Arijoon):</p>\n<p>git diff @ @{upstream}</p>\n<h2>Adding committing and the git index</h2>\n<p>The git add command adds content from the working directory into the staging area (or\"index\") for the next commit.</p>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\">git add\ngit add fileName\ngit add -A        #add all\ngit add . # all current directory\ngit add -u # update all tracked files</code></pre></div>\n<p>The git commit command takes all the file contents that have been staged with git add and records a new permanent snapshot in the database and then moves the branch pointer on the current branch up to it.</p>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\">git commit -m <span class=\"token string\">\"\"</span>\ngit commit -a -m <span class=\"token string\">\"by pass staging and use of add \"</span></code></pre></div>\n<p>But use with caution as it does not give very trackable commits.</p>\n<p>What can you do with the index staged files?</p>\n<h2>Pull or fetch</h2>\n<p>Pull can be though as fetch  then merge most of the time. Thus fetch if you want the local changes avaialbe but not in your  workspace.</p>\n<h2>Merge and rebase</h2>\n<p>Things to know about merge and rebase (and what about checkout)</p>\n<p>Whats the difference</p>\n<p>Why don't you use checkout</p>\n<p>From git version 2.23 produced two commands there</p>\n<p>switch\nrestore</p>\n<p>Basically if you checkout a file you you revert or reverse the modification of an unstaged file.</p>\n<p>When not to rebase</p>\n<h3>Merging branches</h3>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\"> git switch &lt;branch>\n git merge &lt;feature-branch></code></pre></div>\n<h4>Safe remote merge steps</h4>\n<ol>\n<li>git fetch origin</li>\n<li>git log --oneline main..origin/main</li>\n<li>git checkout main</li>\n<li>git log origin/main</li>\n<li>git merge origin/main</li>\n</ol>\n<h4>But how do you revert</h4>\n<h3>Rebase branches</h3>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\"> git switch &lt;branch>\n git rebase &lt;feature-branch></code></pre></div>\n<h2>When to use  git stash</h2>\n<p>To \"Stash the changes in a dirty working directory away\".</p>\n<ul>\n<li>CASE 1: You are in the middle of something, and you have got a call to urgently resolve a bug.</li>\n<li>CASE 2: You have uncommitted files and try to “git pull” and due to conflicts</li>\n</ul>\n<p>Commands to use:</p>\n<div class=\"gatsby-highlight\" data-language=\"git\"><pre class=\"language-git\"><code class=\"language-git\">git stash push -m &lt;name or message> # put stash on a stack\n git stash push -m &lt;message> &lt;path-of-file> #stash a named file\ngit stash list  # list delta on stack\ngit stash pop  #  applies delta to work space throws away code on  stack\ngit stash pop n # applies agiven delta to workspace\ngit stash apply – keeps it in the stash-list even after applying it, for later reuse.</code></pre></div>\n<p>Other commands show drop and clear</p>\n<h2>Resources</h2>\n<p><a href=\"https://gist.github.com/gregrickaby/70f10dfa9385c1d5cc49f99562ffb816\">Gist Crib sheet</a>\n<a href=\"http://gitref.org/\">For fast reference see:</a>\n<a href=\"https://github.com/git-tips/tips\">git Tips:</a>\n<a href=\"https://blog.osteele.com/2008/05/my-git-workflow/\">git workflow</a>\n<a href=\"https://newbedev.com/what-is-the-difference-between-git-diff-head-vs-git-diff-staged\">git index</a>\n<a href=\"https://www.atlassian.com/git/tutorials/syncing/git-fetch\">git fetch</a>\n<a href=\"https://bluecast.tech/blog/git-stash/\">Using stash</a></p>","frontmatter":{"title":"Git Recipes","date":"2021, Sep 11","tags":["git Cheatsheet","git"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABZnagoCwz/8QAGRAAAwADAAAAAAAAAAAAAAAAAQIDABIx/9oACAEBAAEFAlkoyyjRIoVHO5Rzv//EABcRAQADAAAAAAAAAAAAAAAAAAACERL/2gAIAQMBAT8BpqL/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQIBAT8Bqa//xAAbEAACAQUAAAAAAAAAAAAAAAAAAREQISIycf/aAAgBAQAGPwI1nhlZ0hjg/8QAGhABAAIDAQAAAAAAAAAAAAAAAQAhETFBUf/aAAgBAQABPyHbZSPo2aKQUl6ixZhCtknEAr2f/9oADAMBAAIAAwAAABCzL//EABYRAQEBAAAAAAAAAAAAAAAAABEAIf/aAAgBAwEBPxAEOF//xAAWEQEBAQAAAAAAAAAAAAAAAAARACH/2gAIAQIBAT8QTPrf/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARMUFhIVH/2gAIAQEAAT8QRK6wtBC/UqIt73ZDn5KdTJGqeYvUSCtUF8B1n//Z"},"images":{"fallback":{"src":"/static/d0638a9c17107dbd01665305ccfe940a/1eb4c/software.jpg","srcSet":"/static/d0638a9c17107dbd01665305ccfe940a/53c59/software.jpg 750w,\n/static/d0638a9c17107dbd01665305ccfe940a/64b93/software.jpg 1080w,\n/static/d0638a9c17107dbd01665305ccfe940a/1eb4c/software.jpg 1280w","sizes":"100vw"},"sources":[{"srcSet":"/static/d0638a9c17107dbd01665305ccfe940a/d45cf/software.avif 750w,\n/static/d0638a9c17107dbd01665305ccfe940a/94e8c/software.avif 1080w,\n/static/d0638a9c17107dbd01665305ccfe940a/32272/software.avif 1280w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/d0638a9c17107dbd01665305ccfe940a/3970f/software.webp 750w,\n/static/d0638a9c17107dbd01665305ccfe940a/90a5d/software.webp 1080w,\n/static/d0638a9c17107dbd01665305ccfe940a/a02e4/software.webp 1280w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.665625}}}}}},"pageContext":{"slug":"/git/","previous":{"fields":{"slug":"/raspberrypi/dotnet5onraspberrppi/"},"frontmatter":{"title":"DotNet on Raspberry pi","tags":["git","github"],"img":null}},"next":{"fields":{"slug":"/python/mongodb/"},"frontmatter":{"title":"Python and Mongodb","tags":["python","mongodb"],"img":null}}}},"staticQueryHashes":["2478211480","63159454"]}