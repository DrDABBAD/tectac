{"componentChunkName":"component---src-templates-blog-post-js","path":"/hugo/","result":{"data":{"site":{"siteMetadata":{"title":"Tectac","author":"David Briggs"}},"markdownRemark":{"id":"5e3faa5e-66d0-5d53-a043-5d2856a07c32","excerpt":"Aside gatsby Draft mode hugo Aside: what is toolbox ? Hugo site initialisation you have now have local git repository\nNow add themes\ncd themes\ngit submodule add…","html":"<h2>Aside</h2>\n<p>gatsby Draft mode</p>\n<h2>hugo</h2>\n<p>Aside: what is toolbox ?</p>\n<h2>Hugo site initialisation</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir  &lt;site directory&gt;\nhugo new site . /\ngit init\n*Set branch to main since git still uses master*\ngit branch --move master main\ngit branch --all\n(git push --set-upstream origin main) may be\ngit add .   # or is this  * ?\ngit commit -m &quot;init commit&quot;</code></pre></div>\n<p>you have now have local git repository\n<em>Now add themes</em>\ncd themes\ngit submodule add <a href=\"https://github.com\">https://github.com</a>&#x3C;hugotheme> (try beautiful hugo or )\ngit status\ngit add .\ngit commit -m \"\"theme added\ncopy  themes example site to  parent of hugo site</p>\n<p>git commmit  -m \" theme added\"</p>\n<p><em>Run the site</em>\nHugo server</p>\n<p>Pushing site to gitlab\ngit push -u git@gitlab.com:&#x3C;username>/&#x3C;sitename.git></p>\n<p>What is the branch</p>\n<h3>Host on GitLab</h3>\n<p>Expectations: \"Host a private repo of my site content, build a Hugo site when there is a commit to the master branch and deploys the static content to GitLab pages\"</p>\n<p>But how ?</p>\n<p>Using  two Features of Gitlabs Pages and CI you</p>\n<ul>\n<li>Commit and then Push your site to GitLab.</li>\n<li>A CI file created as part of your source code\nThis should trigger the <a href=\"https://docs.gitlab.com/ee/ci/\">Git CI</a> build and deployment to [GitLab pages] (<a href=\"https://docs.gitlab.com/ee/user/project/pages/index.html\">https://docs.gitlab.com/ee/user/project/pages/index.html</a>).\nThere must be template for this and <a href=\"https://docs.gitlab.com/ee/user/project/pages/getting_started/pages_new_project_template.html\">there is</a>.</li>\n</ul>\n<p>The CI File (Aside: YAML supports single line comments #. ):</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> monachus/hugo\n<span class=\"token comment\"># line above specifies the docker base image to use for our pipeline</span>\n<span class=\"token key atrule\">pages</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> hugo          <span class=\"token comment\"># Render the Hugo site</span>\n    <span class=\"token key atrule\">artifacts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> public    <span class=\"token comment\"># Tell GitLab Pages to serve the public folder</span>\n    <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> master</code></pre></div>\n<p>Alternative with a test branch</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># All available Hugo versions are listed here: https://gitlab.com/pages/hugo/container_registry</span>\n<span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> registry.gitlab.com/pages/hugo<span class=\"token punctuation\">:</span>latest\n\n<span class=\"token key atrule\">variables</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">GIT_SUBMODULE_STRATEGY</span><span class=\"token punctuation\">:</span> recursive\n\n<span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> hugo\n  <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> $CI_COMMIT_REF_NAME <span class=\"token tag\">!=</span> $CI_DEFAULT_BRANCH\n\n<span class=\"token key atrule\">pages</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> hugo\n  <span class=\"token key atrule\">artifacts</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> public\n  <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH</code></pre></div>\n<h3>Notes on my deployment</h3>\n<p>First attempt</p>\n<p><a href=\"https://viewtec-web.gitlab.io//Viewtecblg/\">https://viewtec-web.gitlab.io//Viewtecblg/</a>  shows wen site but not css or links\nso something wrong with links why?</p>\n<h3>[Git page access]</h3>\n<p>See <a href=\"https://docs.gitlab.com/ee/user/project/pages/pages_access_control.html\">git page access</a></p>\n<p>Navigate to your project’s Settings > General and expand Visibility, project features, permissions.</p>\n<p>Toggle the Pages button</p>\n<h3>Custom domains and SSL/TLS certificates</h3>\n<p> A GitLab Pages website  by default is served under the default Pages domain (*.gitlab.io, for GitLab.com ,<a href=\"https://viewtec-web.gitlab.io//Viewtecblg/\">https://viewtec-web.gitlab.io//Viewtecblg/</a>).</p>\n<p>To create custom domain name example.com or subdomain subdomain.example.com, you need to Access to your domain’s server control panel to set up DNS records:</p>\n<p>A DNS A or CNAME record pointing your domain held on you DNS server??  (godaddy etc) to GitLab Pages server.\nA DNS TXT record to verify your domain’s ownership.</p>\n<p>Set either external<em>http or external</em>https in /etc/gitlab/gitlab.rb to the IP and port of your Pages Daemon. If you don’t have IPv6, you can omit the IPv6 address.</p>\n<h4>Steps to create your domain</h4>\n<p>In Gitlab:\nNavigate to your project’s Setting > Pages and click + New domain (Url expected <a href=\"https://gitlab.com/viewtec-web/Viewtecblg/pages\">https://gitlab.com/viewtec-web/Viewtecblg/pages</a>)</p>\n<p>Domain Related</p>\n<h2>DNS Entry  | Type  |  Destination</h2>\n<p>  <em>gitlab-pages-verification-code.viewtec.co.uk  |  TXT |gitlab-pages-verification-code=138f41971dcdbc4443b02e928f54b16a\n@   A  35.185.44.232   ( orignal for 123 reg  94.136.40.51\nThe  web pages  ip address  is\n<a href=\"https://docs.gitlab.com/ee/user/gitlab\">https://docs.gitlab.com/ee/user/gitlab</a></em>com/</p>\n<p> )</p>\n<h2>Search for your Hugo Website</h2>\n<p>There are several options to cohse from:</p>\n<ul>\n<li>hugo-elasticsearch. Generate Elasticsearch NO</li>\n<li>GitHub Gist for Hugo Workflow  NO</li>\n<li>hugo-lunr.Using lunr.js on a static site, Hugo-lunr will create an index file of any html and markdown documents in your Hugo project.</li>\n<li>hugo-search-index. A library containing Gulp tasks and a prebuilt browser script that implements search.</li>\n</ul>\n<p>Based on quick review hugo-lunr which is open source suites my needs.</p>\n<h3>Using and installing lunr.js</h3>\n<p>get Js from <a href=\"https://github.com/olivernn/lunr.js\">https://github.com/olivernn/lunr.js</a>\nWhat about CDN method and why is is network heavy ?</p>\n<h3>Javascript and hugo cookies</h3>\n<p>FYI\n// Safe: This cookie is only visible to example.gitlab.io\ndocument.cookie = \"key=value\";</p>\n<p>// Unsafe: This cookie is visible to example.gitlab.io and its subdomains,\n// regardless of the presence of the leading dot.\ndocument.cookie = \"key=value;domain=.example.gitlab.io\";\ndocument.cookie = \"key=value;domain=example.gitlab.io\";</p>\n<p>O.k. I need to read up on this</p>\n<h2>Resources</h2>\n<p><a href=\"https://www.bryanklein.com/blog/hugo-site-on-gitlab/\">hugo-site-on-gitlab</a>\n(<a href=\"https://docs.gitlab.com/ee/user/project/pages\">https://docs.gitlab.com/ee/user/project/pages</a>)</p>\n<p>(<a href=\"https://gohugo.io/getting-started/quick-start\">https://gohugo.io/getting-started/quick-start</a>)</p>\n<p>(<a href=\"https://blog.adrianistan.eu/2016/05/26/tutorial-hugo-espanol-generador-sitios-estaticos\">https://blog.adrianistan.eu/2016/05/26/tutorial-hugo-espanol-generador-sitios-estaticos</a>)</p>\n<p><a href=\"https://about.gitlab.com/blog/2019/02/20/start-using-pages-quickly/\">https://about.gitlab.com/blog/2019/02/20/start-using-pages-quickly/</a>\n<a href=\"https://tkainrad.dev/posts/using-hugo-gitlab-pages-and-cloudflare-to-create-and-run-this-website/\">https://tkainrad.dev/posts/using-hugo-gitlab-pages-and-cloudflare-to-create-and-run-this-website/</a></p>\n<h3>Resource search</h3>\n<h3>Template</h3>\n<p><a href=\"https://pages.gitlab.io/hugo/\">Hugo</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=-q6ZiCroiGM\">video beautiful hugo and gitlab</a></p>","frontmatter":{"title":"","date":null,"tags":null,"img":null}}},"pageContext":{"slug":"/hugo/","previous":{"fields":{"slug":"/graphics/svg-edit/"},"frontmatter":{"title":"","tags":null,"img":null}},"next":{"fields":{"slug":"/git/raspberrypi/"},"frontmatter":{"title":"","tags":null,"img":null}}}},"staticQueryHashes":["2478211480","63159454"]}